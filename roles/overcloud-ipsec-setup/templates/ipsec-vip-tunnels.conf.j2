# Generated by ansible.
{% if pacemaker_running.stdout == 'active' %}

conn overcloud-internalapi-vip-tunnel
    left={{ internal_api_vip }}
    leftid=@internalapivip
    right=%any
    rightid=@overcloudinternalapicluster
    authby=secret
    auto=add
    dpdaction=hold
    dpddelay=5
    dpdtimeout=15
    phase2alg={{ ipsec_algorithm }}

conn overcloud-redis-vip-tunnel
    left={{ redis_vip }}
    leftid=@redisvip
    right=%any
    rightid=@overcloudrediscluster
    authby=secret
    auto=add
    dpdaction=hold
    dpddelay=5
    dpdtimeout=15
    phase2alg={{ ipsec_algorithm }}
{% endif %}

conn overcloud-internalapi-node-to-vip-tunnel
    left={{ current_ip }}
    leftid=@overcloudinternalapicluster
    right={{ internal_api_vip }}
    rightid=@internalapivip
    authby=secret
    auto=route
    dpdaction=hold
    dpddelay=5
    dpdtimeout=15
    phase2alg={{ ipsec_algorithm }}

conn overcloud-redis-node-to-vip-tunnel
    left={{ current_ip }}
    leftid=@overcloudrediscluster
    right={{ redis_vip }}
    rightid=@redisvip
    authby=secret
    auto=route
    dpdaction=hold
    dpddelay=5
    dpdtimeout=15
    phase2alg={{ ipsec_algorithm }}
